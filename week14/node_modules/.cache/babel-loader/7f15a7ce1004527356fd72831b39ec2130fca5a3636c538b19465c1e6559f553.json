{"ast":null,"code":"//authAxios.js\n\nimport axios from \"axios\";\nimport { getNewRefreshToken } from \"./user\";\nexport const getAuthAxios = token => {\n  const authAxios = axios.create({\n    baseURL: \"https://likelion-cau.r-e.kr\",\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  authAxios.interceptors.response.use(response => response.data,\n  // 응답이 잘 왔으면 받은 응답을 반환\n  async error => {\n    // 에러가 발생했을 때 아래 코드들을 실행\n    const result = await getNewRefreshToken();\n    error.config.headers.Authorization = result.accessToken;\n    // 오류가 발생한 요청을 했을 때, 헤더에 담아서 보낸 토큰을 새 토큰으로 변경\n    localStorage.setItem(\"accessToken\", result.accessToken);\n    localStorage.setItem(\"refreshToken\", result.refreshToken);\n    return (await axios.get(error.config.url, error.config)).data;\n    //에러가 발생한 요청의 url을 그대로 가져와서 사용하고, 필요한 데이터들은\n    //error.config 객체 내에 담겨있기 때문에 그대로 다시 가져와서 get 요청\n  });\n  return authAxios;\n};","map":{"version":3,"names":["axios","getNewRefreshToken","getAuthAxios","token","authAxios","create","baseURL","headers","Authorization","interceptors","response","use","data","error","result","config","accessToken","localStorage","setItem","refreshToken","get","url"],"sources":["/Users/jeong-geon/Desktop/FrontEnd_Study/Likelion13th-git/week14/src/apis/authAxios.js"],"sourcesContent":["//authAxios.js\n\nimport axios from \"axios\";\nimport { getNewRefreshToken } from \"./user\";\n\nexport const getAuthAxios = (token) => {\n  const authAxios = axios.create({\n    baseURL: \"https://likelion-cau.r-e.kr\",\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n  authAxios.interceptors.response.use(\n    (response) => response.data, // 응답이 잘 왔으면 받은 응답을 반환\n    async (error) => {\n      // 에러가 발생했을 때 아래 코드들을 실행\n      const result = await getNewRefreshToken();\n      error.config.headers.Authorization = result.accessToken;\n      // 오류가 발생한 요청을 했을 때, 헤더에 담아서 보낸 토큰을 새 토큰으로 변경\n      localStorage.setItem(\"accessToken\", result.accessToken);\n      localStorage.setItem(\"refreshToken\", result.refreshToken);\n      return (await axios.get(error.config.url, error.config)).data;\n      //에러가 발생한 요청의 url을 그대로 가져와서 사용하고, 필요한 데이터들은\n      //error.config 객체 내에 담겨있기 때문에 그대로 다시 가져와서 get 요청\n    }\n  );\n  return authAxios;\n};\n"],"mappings":"AAAA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,kBAAkB,QAAQ,QAAQ;AAE3C,OAAO,MAAMC,YAAY,GAAIC,KAAK,IAAK;EACrC,MAAMC,SAAS,GAAGJ,KAAK,CAACK,MAAM,CAAC;IAC7BC,OAAO,EAAE,6BAA6B;IACtCC,OAAO,EAAE;MACPC,aAAa,EAAE,UAAUL,KAAK;IAChC;EACF,CAAC,CAAC;EACFC,SAAS,CAACK,YAAY,CAACC,QAAQ,CAACC,GAAG,CAChCD,QAAQ,IAAKA,QAAQ,CAACE,IAAI;EAAE;EAC7B,MAAOC,KAAK,IAAK;IACf;IACA,MAAMC,MAAM,GAAG,MAAMb,kBAAkB,CAAC,CAAC;IACzCY,KAAK,CAACE,MAAM,CAACR,OAAO,CAACC,aAAa,GAAGM,MAAM,CAACE,WAAW;IACvD;IACAC,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEJ,MAAM,CAACE,WAAW,CAAC;IACvDC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEJ,MAAM,CAACK,YAAY,CAAC;IACzD,OAAO,CAAC,MAAMnB,KAAK,CAACoB,GAAG,CAACP,KAAK,CAACE,MAAM,CAACM,GAAG,EAAER,KAAK,CAACE,MAAM,CAAC,EAAEH,IAAI;IAC7D;IACA;EACF,CACF,CAAC;EACD,OAAOR,SAAS;AAClB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}